# Чистый, высококачественный код: руководство по тому, как стать лучшим программистом

https://www.butterfly.com.au/blog/website-development/clean-high-quality-code-a-guide-on-how-to-become-a-better-programmer

[прокрутить вниз]()

[Отправить](mailto:?subject=I%20wanted%20you%20to%20see%20this%20site&body=Check%20out%20this%20site%20https://www.butterfly.com.au/blog/website-development/clean-high-quality-code-a-guide-on-how-to-become-a-better-programmer)[ссылку на](javascript:void(0))[эту страницу на facebook](javascript:void(0))[Tweet](http://twitter.com/share?text=check%20it%20out%20this%20awesome%20blog%20&url=https://www.butterfly.com.au/blog/website-development/clean-high-quality-code-a-guide-on-how-to-become-a-better-programmer)**«Любой дурак может написать код, который может понять компьютер. Хорошие программисты пишут код, который люди могут понять». - Мартин Фаулер**Что такое чистый код и зачем он нам нужен?Как красноречиво отмечено Робертом Мартином в его книге «Чистый код», единственным действительным измерением качества кода является количество WTF в минуту, как представлено на диаграмме ниже:**«Мы отлаживаем панику, просматривая код, который, как мы думали, работал? Клиенты, уезжающие толпами и руководители, дышат по нашим шеям? Как мы можем убедиться, что мы завершаемся за правой дверью, когда ситуация становится жесткой? Ответ: мастерство ». ****- Роберт К. Мартин**[![codequality](https://www.butterfly.com.au/sites/default/files/images/blog/cleancode/codequality.JPG)](http://www.osnews.com/story/19266/WTFs_m)Существует множество примеров плохого кода, приводящего компании вниз или создавая катастрофу хорошего качества. Некоторые известные и (довольно серьезные!) Примеры включают в себя космические ракеты, которые были израсходованы из-за плохо переписанной формулы (отсутствовала одна строка, что означало, что ракета должна была быть прекращена через 293 секунды после запуска, в конечном счете, стоила около 20 миллионов долларов) или состояние гонки ошибка в медицинской машине, которая привела к гибели трех человек, когда они подвергались смертельным радиационным дозам, - и вы думаете, **что у вас** был плохой день!Качество кода напрямую коррелирует с ремонтопригодностью продукта. Производительность программирования имеет арккотагентную связь со временем.![производительность-против-времени](https://www.butterfly.com.au/sites/default/files/images/blog/cleancode/productivity-vs-time.png)По мере добавления функций и внесения изменений, время прохождения и первоначальные разработчики продвигаются или забывают некоторые детали проекта, или если качество кода не очень хорошее, изменения становятся все более рискованными и более сложными.Программисты - действительно авторы, а ваша целевая аудитория - не компьютер, а другие программисты (и сами). Отношение времени, затрачиваемого программистом на чтение кода, составляет от 10 до 1. Вы постоянно читаете старый код, чтобы писать новый код.Написание чистого кода упрощает понимание кода в будущем и имеет важное значение для создания успешного поддерживаемого продукта.**«Всегда кодируйте, как будто парень, который заканчивает поддерживать ваш код, будет жестоким психопатом, который знает, где вы живете». - Мартин Голдинг**![времени отработавший на программистах](https://www.butterfly.com.au/sites/default/files/images/blog/cleancode/time-spent-by-programmers.JPG)Трудно написать чистый кодВспомните второй закон термодинамики? Это означает, что беспорядок в системе всегда будет увеличиваться, если вы не тратите энергию и не работаете, чтобы не увеличивать ее.Аналогично, для написания чистого кода требуется много усилий. Написание чистого кода - тяжелая работа. Это требует много практики и фокуса во время исполнения.Чтобы иметь возможность писать чистый код, вы должны тренировать свой ум в течение определенного периода времени. Самая сложная часть - это просто начать, но со временем и ваш набор навыков улучшается, становится легче. Написание чистого кода - все о читаемости, поэтому даже самые маленькие вещи, такие как изменение привычек для имен переменных, имеют большое значение.Мы должны сознательно пытаться улучшить качество кода и уменьшить энтропию кода. У мальчишеских скаутов Америки есть простое правило:**«Оставьте уборщик лагеря, чем вы его нашли».**Это же правило применяется к программистам. Всегда оставляйте проверочный код чище, чем код, который выдается.Примеры того, что вы можете улучшить1. Имя переменной и метода1.1. Использовать целевое имяЭто плохо:`protected $d; // elapsed time in days`Это хорошо:protected $ elapsedTimeInDays;
защищенный $ daysSinceCreation;
защищенный $ daysSinceModification;
protected $ fileAgeInDays;1.2. Использовать произносимое имяЭто плохо:`public $genymdhms;`
`public $modymdhms;`Это хорошо:`public $generationTimestamp;public $modificationTimestamp;`1.3. Использовать пространства имен вместо префиксов именБольшинство современных языков программирования (включая PHP и Python) поддерживают пространства имен.Это плохо:`class Part {``private $m_dsc;``}`Это хорошо:`class Part {``private $description;``}`1.4. Не будь симпатичнымЭто плохо:`$program->whack();`Это хорошо:`$program->kill();`1,5. Используйте одно слово для каждой концепцииБыть последовательным. Например, не используйте **get **и **fetch, **чтобы делать то же самое в разных классах1.6. Использовать имена доменов решенияЛюди, читающие ваш код, будут другими программистами, поэтому они понимают терминологию домена решения, поэтому максимально используйте его. - Например, jobQueue лучше, чем заданий1.7. Использовать глаголы для имен функций и существительных для классов и атрибутов`class Product {``private $price;``public function increasePrice($dollarsToAddToPrice)``{``$this->price += $dollarsToAddToPrice;``}``}`2. Лучшие функции2.1. Чем меньше, тем лучше2.2. Функция должна делать только одну вещь2,3. Нет вложенной структуры управления2,4. Меньше аргументов лучшеБолее трех аргументов - зло. Например:`Circle makeCircle(Point center, double radius);`Это лучше чем`Circle makeCircle(double x, double y, double radius);`2.5. Никаких побочных эффектовФункции должны делать только то, что предлагает название, и ничего больше.2.6. Избегайте выходных аргументовЕсли возвращать что-то не достаточно, то ваша функция, вероятно, делает больше, чем одно.Например`email.addSignature();`Это лучше чем`addSignature(email);`2,7. Обработка ошибок - это одна вещьВыбросы исключений лучше, чем возврат различных кодов, зависящих от ошибок.Просить прощения проще, чем запрашивать разрешение. Используйте try / catch вместо условий, если это возможно2,8. Не повторяйте себяФункции должны быть атомарными3. Комментарии3.1. Не комментируйте плохой код, перепишите его3.2. Если код читаем, вам не нужны комментарииЭто плохо:`// Check to see if the employee is eligible for full benefits``if ($employee->flags && self::HOURLY_FLAG && $employee->age > 65)`Это хорошо:`if ($employee->isEligibleForFullBenefits())`3.3. Объясните свое намерение в комментарияхНапример:`// if we sort the array here the logic becomes simpler in calculatePayment() method`3.4. Предупреждение о последствиях в комментарияхНапример:`// this script will take a very long time to run`3.5. Акцент на важные моменты в комментарияхНапример:`// the trim function is very important, in most cases the username has a trailing space`3,6. Всегда иметь комментарии PHPDocБольшинство IDE делают это автоматически, просто выберите ярлык.Наличие комментариев к Doc особенно важно в PHP, потому что методы не имеют аргументов и возвращаемых типов. Имея doc-комментарии, мы можем указать аргументы и типы возвращаемых значений для функций.Если имя вашей функции ясное, вам не нужно описание того, что метод делает в комментарии к документу.Например:`/*** Return a customer based on id* @param int $id* @return Customer*/Public function getCustomerById($id)`3,7. Любые комментарии, отличные от приведенных выше, следует избегать3,8. Шумные комментарии плохиеНапример:`/** The day of the month. */private $dayOfMonth;`3,9. Никогда не оставляйте комментарий в кодеВозможно, это самый важный момент в этой статье. С помощью современного программного обеспечения для управления версиями, такого как Git, вы всегда можете исследовать и вернуться к историческому коду. Хорошо прокомментировать код при отладке или программировании, но вы никогда не должны проверять код с комментариями.4. Другие запахи кода и эвристикаЕсть намного больше, что вы можете сделать, чтобы определить и избежать плохого кода. Ниже приведен список некоторых запахов кода и анти-шаблонов, которых следует избегать. Для получения дополнительной информации обратитесь к источникам этого блога.Мертвый кодСпекулятивная общность - не нужно », а что?Большие классыБог объектНесколько языков в одном файлеРамочные основные модификацииЧрезмерное использование статических (особенно при кодировании в Joomla!)Магические числа - заменить на const или varДлинные, если условия - заменить на функциюПереписанные методы super superКруговая зависимостьЦиркулярные ссылкиПоследовательная связьHard-кодированиеСлишком много наследования - состав лучше, чем наследованиеВыводКак я уже упоминал ранее, требуется много практики и усилий для написания чистого кода. Однако это определенно стоит дополнительных усилий. Написание чистого кода является неотъемлемой частью успеха проекта.Принятие стандартов кодирования, таких как (PSR-2), упростит запись чистого кода. Если вы используете PhpStorm (IntelliJ), вы можете настроить стиль кодирования на PSR-2, а внутренний инспектор IDE проиндексирует вас, когда ваш код не подходит.Также принятие кода Sniffer поможет много. Вы можете установить CodeSniffer Joomla и только зафиксировать, когда он зеленый.Идеальный код не всегда возможен, но важно как можно чище писать код. Программирование - это искусство. Пусть другим программистам понравится ваш код.Чтобы закончить, я хотел бы поделиться цитатой из Роберта Мартина: 
«[Большинство менеджеров] могут отстаивать график и требования со страстью; но это их работа. Ваша задача защищать код с одинаковой страстью »источники«Чистый код: руководство по гибкому программному мастерству» Роберта К. Мартина<https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md><http://docs.joomla.org/Joomla_CodeSniffer><http://www.javacodegeeks.com/2013/02/my-favourite-programming-quotes.html>[Получите консультативный плакат «Путеводитель о том, как стать лучшим программистом»!](https://www.butterfly.com.au/sites/default/files/images/blog/cleancode/poster.pdf)![Араш Араби](https://www.butterfly.com.au/sites/default/files/pictures/2016-07/arash.png) Статья добавлена [Арашем Араби](https://www.butterfly.com.au/blog/blogger/arash_arabi)Вернуться к [разработке сайта](https://www.butterfly.com.au/blog/website-development) 