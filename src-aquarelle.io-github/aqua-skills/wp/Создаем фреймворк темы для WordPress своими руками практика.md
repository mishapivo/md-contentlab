[![Создаем фреймворк темы для WordPress своими руками: практика](https://wpcafe.org/wp-content/uploads/diy_wordpress_framework.jpg)](https://wpcafe.org/tutorials/wordpress-framework-part-2-creating-the-theme/)

# [Создаем фреймворк темы для WordPress своими руками: практика](https://wpcafe.org/tutorials/wordpress-framework-part-2-creating-the-theme/)

Ноябрь 15, 2011 | [Уроки](https://wpcafe.org/category/tutorials/)

[wordpress темы](https://wpcafe.org/tags/wordpress-temyi/), [разработка](https://wpcafe.org/tags/razrabotka/), [фреймворки](https://wpcafe.org/tags/freymvorki/) [0](https://wpcafe.org/tutorials/wordpress-framework-part-2-creating-the-theme/#respond)

В **предыдущей публикации** мы остановились на **основных принципах и положениях**, которые важны при создании своего фреймворка тем. А сегодня предлагаю подробно изучить **процесс создания собственного фреймворка** темы для сайта на основе WordPress, более подробно остановившись на коде **CSS**, файле **functions.php** и выборе страниц шаблона.
При этом важно не забывать, что полученный фреймворк должен обобщать код настолько, чтобы его можно было с легкостью применять в новых темах, а также чтобы этот фреймворк получился самодостаточным как тема, которую уже можно применять без доработки.
Итак, начнем.

## Тема и ее CSS

Для начала нам надо заняться упорядочиванием кода в **CSS**. В моем фреймворке есть 2 основных компонента CSS: файл под названием **style.css** (обязательный файл) и папка **/css/**, в которой находится все, что "привязано" к CSS для моего фреймворка. В файле **style.css** есть 2 секции: **дефиниции** из темы и **запросы** к моей текущей верстке и параметрам CSS. Общий вид файла **style.css** - вот такой:

После определения параметров темы вы видите три строки с **@import**. Вот в этой части начинаются наиболее существенные правки в **CSS**. Файл **reset.css** задает "**очистку**" настроек CSS. Название я изменил на **normalize.css** по нескольким причинам.

**Во-первых**, вместо того, чтобы все настройки отображения "**сбрасывать**" на неотформатированный стиль, этот файл создает стиль, который по умолчанию задается вашим браузером. К примеру, стандартно **<strong>** — это не тип шрифта, а в **normalize.css** он задает жирный шрифт.

**А во-вторых**, в нем есть стили по умолчанию для элементов на основе **HTML5**, что надо для поддержки старых версий браузеров, где нет поддержки новых функций.

> **Примечание:** В этой теме я использую **HTML5**. Он работает в браузерах Firefox, Chrome, Safari, IE7-9.

После того, как **reset.css** вызвана, я вызываю мою основную таблицу стилей **master.css**. В ней вся суть: здесь будут все мои новые стили по умолчанию. Я не буду приводить весь **CSS**, но я прикрепляю файлы, чтобы вы могли просмотреть.

### [Скачать исходники](https://wpcafe.org/wp-content/uploads/wp-boilerplate.zip)

Создавая **CSS**, я задаю стили, которые обычно остаются такими же от сайта к сайту: вроде ширины общего контейнера, мои стили навигации, как я размещаю мой сайдбар и т.п. Также я обычно использую границы и отступы, кратные 15, для моих абзацев и пунктов списка, так что для них у меня тоже есть базовые определения.

Я также прописываю стили по умолчанию для некоторых распространенных классов WordPress, включая сгенерированные редактором. Это:

Последняя вещь, которую я добавляю в **master.css**, — это класс, который делает слои «самоочищающимися». Это убирает необходимость слоя **.clearfix**.

После того, как вызван **master.css**, я вызываю последний кусочек нашего паззла — **ie.css**. Здесь у нас будут всевозможные поправки для IE. В данный момент, это просто поправки для **.group** и **PNG**. Помните, что очередность импортирования здесь **очень** важна, поскольку некоторые вещи могут переопределяться, и изменение очередности может внести путаницу в стили, которые мы уже определили.

## Functions.php

Файл **functions.php **важен не менее, чем **CSS**. Сюда мы будем добавлять все общие функции, которые мы планируем использовать по всей теме, а также все определения для сайдбаров, меню и т.д. Я начинаю с двух строк:

Это — две константы, которые я достаточно часто использую по всей теме.

**Первая** – путь к шаблону; это удобно для ссылки на конкретные файлы темы. Я использую ‘**stylesheet_directory**’ вместо ‘**template_directory**’, потому что если мы будем использовать тему как родительскую, ‘**template_directory**’ возьмет не тот путь (а именно, этот вместо подчиненного пути).

**Вторая** строка использует **TEMPPATH**, чтобы создать путь к папке /**images**/, которую мы также будем использовать очень часто, в этой ли теме или в теме, сгенерированной на ее основе.

После этих двух строк я добавляю поддержку динамических меню и 2 сайдбаров с виджетами: первый – основной и второй – сайдбар "на всякий случай" (в большинстве случаев, я буду использовать его в футере моей темы). В завершение я создал две другие функции, которые я, как выяснил, регулярно использую:

**Первая** выводит навигацию по постам и должна использоваться вне цикла . То есть, мы можем использовать ее на любой странице со списком постов (главная страница, поиск, любой специфический шаблон с постами).

**Вторая** функция создает область «Пост не найден», которую я использую практически на каждой шаблонной странице.

Конечно, здесь нет ограничения на количество созданных функций. Здесь просто функции, которые я часто использую.

## Страницы шаблонов

Далее следуют шаблонные страницы. Мы рассмотрим 4 страницы: **header.php**, **footer.php**, **single.php** и **page.php**. Остальные – по сути производные страницы или отдельные шаблоны.

### Шапка и Подвал

Так выглядит наш файл **header.php**:

Вы видите, что здесь не так уж много всего помимо наших стандартных обьявлений **<header>**.

Я включил

чтобы убедиться, что наша тема совместима с HTML5, далее в теле страницы создал базовый хедер с названием сайта и навигацией, вызвал сайдбар и начал «контентную» часть, заключенную в предопределенный слой **#container**. Вы можете увидеть, что мой способ разметки соответствует тому, как задан мой **CSS**.

> **Обратите внимание: **Я не говорю о шаблоне **sidebar.php**, потому как он такой же, как любой стандартный сайдбар: проверьте, определена ли область для виджетов; если нет – выведите несколько виджетов по умолчанию.

То же самое для нашего футера:

Я вывел 2 разрыва строки, в основном для того, чтобы сделать код симпатичнее, закрыл слой контента, затем начал футер. Я включил второстепенный сайдбар в футер, поскольку я так обычно делаю, далее вывел общую информацию о копирайте, и закончил тему, закрыв все открытые теги. Опять таки, я стараюсь не делать слишком много с футером, поскольку это фреймворк, но создаю возможность добавить информацию в футер, если мне понадобится.

### Код для Single и Page

Эти файлы тоже достаточно просты. В каждом из них я постарался убрать все ненужное, оставив только то, что вы ожидаете увидеть.

В файле **single.php** код будет таким:

Теперь у нас есть хедер, футер и наш цикл. Я оставил классы, которые обычно есть в большинстве тем WordPress для того, чтобы люди могли просто определить эти классы в **CSS** без необходимости изменять **single.php**. Я также добавил стандартную мета-информацию поста и область комментариев.

Обратите внимание, я не использую навигацию по постам, которую я написал в **functions.php**, потому что это "внутренность" цикла, и эта функция может вести себя непредсказуемо.

Шаблон **page.php** немного короче:

Опять-таки: я написал только необходимое. Никаких лишних классов или информации. Страницы сайтов сфокусированы на контенте, поэтому я старался максимально упростить этот шаблон.

### Другие шаблоны

Очевидно, что я не могу описать здесь все шаблоны страниц; я советую вам посмотреть прикрепленные исходники. В каждом шаблоне я постарался убрать то, что я не использую, в некоторых случаях я оставил шаблон таким же, как по умолчанию в WordPress.

Готовая тема выглядит так: Фреймворк **WordPress Boilerplate**
[![WordPress Theme Framework](https://wpcafe.org/wp-content/uploads/creating.png)](https://wpcafe.org/wp-content/uploads/creating.png)

## Выводы

Я сделал общий обзор с некоторыми примерами создания фреймворка темы. Просмотрев мой пример кода, вы увидите, что я не старался сделать очень много с каким-либо отдельным файлом шаблона. Если я буду добавлять что-либо в эту тему, я буду добавлять это в файл **functions.php**, потому что файлы шаблонов должны оставаться базовыми – особенно если мы собираемся перезаписать их при создании новой темы на основе данной.

###### **Источник: WP.TutsPlus.com**

** 3616 просмотров всего, 3 просмотров сегодня

**Вам понравился материал?**