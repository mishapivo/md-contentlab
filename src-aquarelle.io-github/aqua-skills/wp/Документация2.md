# Документация

- [Загрузить PDFconfigure-wildcard-subdomains.pdf](http://localhost/dashboard/docs/configure-wildcard-subdomains.pdf)

# Настройка поддоменов на основе подстановочных знаков

Функция виртуального хостинга Apache позволяет легко размещать несколько веб-сайтов или веб-приложений на одном сервере, каждый из которых доступен с другим доменным именем. Однако, когда у вас есть большое количество виртуальных хостов, которые используют почти идентичную конфигурацию, поддомены на основе подстановок упрощают обслуживание и уменьшают усилия, связанные с добавлением нового виртуального хоста.

С поддоменами подстановок больше не нужно редактировать конфигурационный файл Apache или перезапускать сервер для инициализации нового виртуального хоста. Вместо этого вам просто нужно создать подкаталог, соответствующий имени поддомена на сервере, с вашим контентом, и Apache автоматически будет использовать этот каталог для обслуживания запросов для соответствующего поддомена.

| **   | Виртуальные хосты, созданные таким образом, не будут доступны из других систем, если только эти системы не настроены отдельно для связывания пользовательских доменов, используемых виртуальными хостами, с IP-адресом сервера XAMPP. |
| ---- | ---------------------------------------- |
|      |                                          |

В этом руководстве описывается процесс создания виртуальных хостов с помощью XAMPP, так что запросы для *subdomain.localhost* автоматически обслуживаются *поддоменом /* каталогом корня документа основного сервера. Выполните следующие шаги:. Перейдите в каталог установки XAMPP (обычно, *C: \ xampp* ) и откройте файл *httpd.conf* в подкаталоге *apache \ conf \,* используя ваш любимый текстовый редактор. Внутри файла найдите следующую строку и раскомментируйте ее, удалив символ хеша (#) в начале строки.

```
Модули LoadModule vhost_alias_module / mod_vhost_alias.so
```

1. Затем отредактируйте файл *httpd-vhosts.conf* в подкаталоге *apache \ conf \ extra \* вашего установочного каталога XAMPP.

2. Замените содержимое этого файла на следующие директивы:

   ```
   UseCanonicalName Off
   <VirtualHost *: 80>
          DocumentRoot "C: / xampp / htdocs /"
          Имя_сервера localhost
   </ VirtualHost>
   <VirtualHost *: 80>
          ServerAlias * .localhost
          VirtualDocumentRoot "C: / xampp / htdocs /% 1 /"
   </ VirtualHost>
   ```

   ![image1](http://localhost/dashboard/docs/images/configure-wildcard-subdomains/image1.png)

   В этой конфигурации первый виртуальный хост-блок настраивает порядок обработки запросов по умолчанию. Второй блок настраивает виртуальный хост для поддоменов, так что запросы для *subdomain.localhost* автоматически обслуживаются каталогом *subdomain \* каталога *C: \ xampp \ htdocs \* . В частности, обратите внимание на заполнитель% 1, который соответствует имени поддомена из URL-адреса запроса.

3. Перезапустите Apache с помощью панели управления XAMPP, чтобы ваши изменения вступили в силу.

   ![image2](http://localhost/dashboard/docs/images/configure-wildcard-subdomains/image2.png)

На этом этапе настроены поддомены подстановочных знаков. Вы можете легко протестировать это, используя проводник Windows, чтобы создать два новых подкаталога в *C: \ xampp \ htdocs \ app01 \* и *C: \ xampp \ htdocs \ app02 \* . Внутри каждого подкаталога создайте файл с именем *index.html* и заполните его некоторым образцом содержимого HTML. Используйте разные материалы для каждого файла, чтобы вы могли легко отличить их от разных каталогов - например:

```
<! - index.html в каталоге app01 ->
<HTML>
 <HEAD> </ HEAD>
 <Тело>
  <H1> Добро пожаловать в app01.localhost! </ H1>
 </ Body>
</ Html>
```

```
<! - index.html в каталоге app02 ->
<HTML>
 <HEAD> </ HEAD>
 <Тело>
  <H1> Привет из app02.localhost! </ H1>
 </ Body>
</ Html>
```

Поскольку эти домены фактически не существуют на самом деле, вам также необходимо сопоставить их с локальным IP-адресом. Откройте файл *C: \ windows \ system32 \ drivers \ etc \ hosts* в текстовом редакторе и добавьте в него следующую строку:

```
127.0.0.1 app01.localhost app02.localhost
```

![image3](http://localhost/dashboard/docs/images/configure-wildcard-subdomains/image3.png)

| **   | Вам нужно будет делать это каждый раз, когда вы хотите настроить новый виртуальный хост подстановочного знака, потому что файл *хостов* Windows не поддерживает подстановочные записи. Чтобы избежать этого шага, вы можете использовать DNS-сервер или локальный прокси-сервер DNS, который поддерживает подстановочные знаки и, следовательно, заботится о автоматическом разрешении запросов ** .localhost* на локальный IP-адрес. |
| ---- | ---------------------------------------- |
|      |                                          |

| **   | В некоторых версиях Windows вы не сможете редактировать файл *C: \ windows \ system32 \ drivers \ etc \ hosts* без прав администратора. Вы можете отредактировать файл, щелкнув правой кнопкой мыши значок «Блокнот» и выбрав пункт «Запуск от имени администратора», затем введите учетные данные администратора (если необходимо) и нажмите «ОК» или «Да», чтобы продолжить. |
| ---- | ---------------------------------------- |
|      |                                          |

На этом этапе вы должны иметь возможность вводить URL-адреса [http: //app01.localhost](http://app01.localhost/) или [http: //app02.localhost](http://app02.localhost/) в адресной строке браузера, и вы должны увидеть соответствующую страницу HTML.

![image4](http://localhost/dashboard/docs/images/configure-wildcard-subdomains/image4.png)